{% block swag_migration_index_main_page %}
    <div class="swag-migration-index-main-page">
        {% block swag_migration_index_main_page_content %}
            <div v-if="!isLoading">
                {% block swag_migration_index_main_page_card_shopInformation %}
                    <swag-migration-shop-information :environmentInformation="environmentInformation"
                                                     :connection="connection"
                                                     :connected="connectionEstablished"
                                                     :lastMigrationDate="lastMigrationDate"
                                                     :isMigrating="isMigrating"
                                                     :isPaused="isPaused"
                                                     :isOtherMigrationRunning="isOtherMigrationRunning">
                    </swag-migration-shop-information>
                {% endblock %}

                {% block swag_migration_index_main_page_card_dataSelector %}
                    <swag-migration-data-selector ref="dataSelector"
                                                  :tableData="tableDataFiltered"
                                                  v-if="componentIndex === components.dataSelector"
                                                  @swag-migration-data-selector-migration-allowed="onMigrationAllowed">
                    </swag-migration-data-selector>
                {% endblock %}

                {% block swag_migration_index_main_page_card_premapping %}
                    <swag-migration-premapping v-if="componentIndex === components.premapping"
                                               :premapping="premapping"
                                               @onPremappingValid="onPremappingValid">
                    </swag-migration-premapping>
                {% endblock %}

                {% block swag_migration_index_main_page_card_loadingScreen %}
                    <swag-migration-loading-screen v-if="componentIndex === components.loadingScreen"
                                                   profileName="Shopware 5"
                                                   :entityGroups="entityGroups"
                                                   :statusIndex="statusIndex">
                    </swag-migration-loading-screen>
                {% endblock %}

                {% block swag_migration_index_main_page_card_loadingScreen_success %}
                    <swag-migration-loading-screen-success v-if="componentIndex === components.resultSuccess">
                    </swag-migration-loading-screen-success>
                {% endblock %}

                {% block swag_migration_index_main_page_card_loadingScreen_warning %}
                    <swag-migration-loading-screen-warning v-if="componentIndex === components.resultWarning"
                                                           :errorList="errorList">
                    </swag-migration-loading-screen-warning>
                {% endblock %}

                {% block swag_migration_index_main_page_card_loadingScreen_failure %}
                    <swag-migration-loading-screen-failure v-if="componentIndex === components.resultFailure">
                    </swag-migration-loading-screen-failure>
                {% endblock %}

                {% block swag_migration_index_main_page_card_loadingScreen_pause %}
                    <swag-migration-loading-screen-pause v-if="componentIndex === components.pauseScreen">
                    </swag-migration-loading-screen-pause>
                {% endblock %}

                {% block swag_migration_index_main_page_card_loadingScreen_takeover %}
                    <swag-migration-loading-screen-takeover v-if="componentIndex === components.takeover"
                                                            @onTakeoverMigration="onTakeoverMigration"
                                                            :isOtherInstanceFetching="isOtherInstanceFetching"
                                                            :isMigrationInterrupted="isMigrationInterrupted">
                    </swag-migration-loading-screen-takeover>
                {% endblock %}

                {% block swag_migration_index_main_page_modal_migration_confirmDialog %}
                    <sw-modal v-if="showMigrationConfirmDialog"
                              :title="$tc('swag-migration.index.confirmDialog.title')"
                              :isLoading="isMigrating"
                              @closeModal="onCloseMigrationConfirmDialog"
                              variant="small">

                        {% block swag_migration_index_main_page_modal_migration_confirmDialog_message %}
                            <p class="swag-migration-index-modal-migration-confirm-dialog-message">
                                {{ $tc('swag-migration.index.confirmDialog.message') }}
                            </p>
                        {% endblock %}

                        {% block swag_migration_index_main_page_modal_migration_confirmDialog_footer %}
                            <template slot="modal-footer">
                                {% block swag_migration_index_main_page_modal_migration_confirmDialog_footer_cancelAction %}
                                    <sw-button @click="onCloseMigrationConfirmDialog"
                                               size="small">
                                        {{ $tc('swag-migration.index.confirmDialog.cancel') }}
                                    </sw-button>
                                {% endblock %}

                                {% block swag_migration_index_main_page_modal_migration_confirmDialog_footer_confirmAction %}
                                    <sw-button @click="onMigrate"
                                               variant="primary"
                                               size="small">
                                        {{ $tc('swag-migration.index.confirmDialog.confirm') }}
                                    </sw-button>
                                {% endblock %}
                            </template>
                        {% endblock %}
                    </sw-modal>
                {% endblock %}

                {% block swag_migration_index_main_page_modal_abort_migration_confirmDialog %}
                    <sw-modal v-if="showAbortMigrationConfirmDialog"
                              :title="$tc('swag-migration.index.confirmAbortDialog.title')"
                              @closeModal="onCloseAbortMigrationConfirmDialog"
                              variant="small">

                        <sw-alert variant="warning"
                                  class="swag-migration-index-data-selector__tou">
                            <p v-html="$tc('swag-migration.index.confirmAbortDialog.hintContent')"></p>
                        </sw-alert>

                        {% block swag_migration_index_main_page_modal_abort_migration_confirmDialog_message %}
                            <p class="swag-migration-index-modal-abort-migration-confirm-dialog-message">
                                {{ $tc('swag-migration.index.confirmAbortDialog.message') }}
                            </p>
                        {% endblock %}

                        {% block swag_migration_index_main_page_modal_abort_migration_confirmDialog_footer %}
                            <template slot="modal-footer">
                                {% block swag_migration_index_main_page_modal_abort_migration_confirmDialog_footer_cancelAction %}
                                    <sw-button @click="onCloseAbortMigrationConfirmDialog"
                                               size="small">
                                        {{ abortMigrationBackText }}
                                    </sw-button>
                                {% endblock %}

                                {% block swag_migration_index_main_page_modal_abort_migration_confirmDialog_footer_confirmAction %}
                                    <sw-button @click="onStop"
                                               variant="primary"
                                               size="small">
                                        {{ $tc('swag-migration.index.confirmAbortDialog.confirm') }}
                                    </sw-button>
                                {% endblock %}
                            </template>
                        {% endblock %}
                    </sw-modal>
                {% endblock %}
            </div>
        {% endblock %}

        {% block swag_migration_index_main_page_loader %}
            <sw-loader v-if="isLoading"></sw-loader>
        {% endblock %}
    </div>
{% endblock %}